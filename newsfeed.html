<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

    <!-- JS, Popper.js, and jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
        integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
        crossorigin="anonymous"></script>
    <script src="/newsfeed.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
</head>



<body>

    <!-- <button data-component="all-posts" class="badge badge-pill badge-primary">Primary</button>
    <button data-component="all-posts" class="badge badge-pill badge-secondary">Secondary</button>
    <button data-component="all-posts" class="badge badge-pill badge-success">Success</button> -->

    <!-- <script>
        var templateResponse = Handlebars.compile( $("#message-response-template").html());
                    var contextResponse = {
                        response: await jresp.results[n1].title,
                        time: this.getCurrentTime()
                    };
    </script> -->

    <!-- <script id="message-response-template" type="text/x-handlebars-template">
    <li>
        <div class="message-data">
            <span class="message-data-name"><i class="fa fa-circle online"></i>Bot</span>
            <span class="message-data-time">{{time}}, Today</span>
        </div>
        <div class="message my-message">
            {{{response}}}
        </div>
    </li> -->

    <main role="main">
        <h2>Recommended</h2>
        <ul class="flexgrid columns-news">
            <li>
                <a id="firstlink">
                    <span class="grid-number">1</span>
                    <figure>
                        <img id="firstimg" src="">
                        <figcaption>
                            <p>
                                neews

                            </p>
                            <h2 id="first">

                            </h2>
                        </figcaption>
                    </figure>
                </a>
            </li>
            <!-- <li>
                <span class="grid-number">2</span>
                <span class="ribbon icon"><a href="/fav" title="Favorite - svg icon, no emoji">✩</a></span>
                <a href="https://dribbble.com/jlantunez">
                    <figure>
                        <img src="https://source.unsplash.com/mZS7cne5iY0/800x600" alt="Photo of Brooklyn Park">
                        <figcaption>
                            <p>Category or Date</p>
                            <h2>How to Find Nature in the City</h2>
                        </figcaption>
                    </figure>
                </a>
            </li>
            <li>
                <span class="ribbon"><a href="/rate" title="Rate">7.2</a></span>
                <a href="https://dribbble.com/jlantunez">
                    <figure>
                        <img src="https://source.unsplash.com/nRAhNSGCpB4/800x600" alt="Photo of a couple">
                        <figcaption>
                            <p>
                                Category or Date
                            </p>
                            <h2>
                                10 Things Happy People Do Differently
                            </h2>
                        </figcaption>
                    </figure>
                </a>
            </li>
            <li>
                <span class="ribbon">
                    <a title="Category" href="/category">Category</a>
                </span>
                <a href="https://dribbble.com/jlantunez">
                    <figure>
                        <img src="https://source.unsplash.com/tUh95ZFdZN4/800x600" alt="Photos of Food">
                        <figcaption>
                            <p>
                                Date
                            </p>
                            <h2>
                                Classic Spanish Food and Recipes
                            </h2>
                        </figcaption>
                    </figure>
                </a>
            </li>
            <li>
                <a href="https://dribbble.com/jlantunez">
                    <span class="grid-number">5</span>
                    <figure>
                        <img src="https://source.unsplash.com/Aa8_X_YgrO4/800x600" alt="Photo of Flat Iron Building">
                        <figcaption>
                            <p>
                                Category or Date
                            </p>
                            <h2>
                                12 world famous buildings to inspire you
                            </h2>
                        </figcaption>
                    </figure>
                </a>
            </li>
            <li>
                <a href="https://dribbble.com/jlantunez">
                    <figure>
                        <img src="https://source.unsplash.com/cMCqPMqeyNI/800x600"
                            alt="Photo of Avenida Constitución (Seville)">
                        <figcaption>
                            <p>
                                Category or Date
                            </p>
                            <h2>
                                Most Popular Street Photos on Instagram Right Now
                            </h2>
                        </figcaption>
                    </figure>
                </a>
            </li>
            <li>
                <a href="https://dribbble.com/jlantunez">
                    <figure>
                        <img src="https://source.unsplash.com/6UJ-a8983DI/800x600" alt="Photo of a smiling couple">
                        <figcaption>
                            <p>
                                Category or Date
                            </p>
                            <h2>
                                Healthy Eating: Easy Tips for Planning a Healthy Diet
                            </h2>
                        </figcaption>
                    </figure>
                </a>
            </li>
            <li>
                <span class="ribbon">
                    <a href="/rate" title="Rate">6.8</a>
                </span>
                <a href="https://dribbble.com/jlantunez">
                    <figure>
                        <img src="https://source.unsplash.com/oU0LEbUxnQU/800x600" alt="Photo of glasses">
                        <figcaption>
                            <p>
                                Category or Date
                            </p>
                            <h2>
                                The Most Iconic Designs of Everyday Objects
                            </h2>
                        </figcaption>
                    </figure>
                </a>
            </li> -->
        </ul>

        



    </main>

    <div class="row" id="posts-container"></div>


    </script>


    <script>
        onload = async function () {
            let navlinks = $('.navbar-nav .nav-link')

            navlinks.click((ev) => {

                let componentUrl = `/${$(ev.target).attr('data-component')}.html`
                $('#content').load(componentUrl)

            })

            let jresp;


            async function getNews() {

                const response = await fetch('https://api.nytimes.com/svc/topstories/v2/home.json?api-key=QJqLn6OcDEABCBC11kTCjoOmRCU0Jrma');
                const jsonResp = await response.json();
                jresp = jsonResp;

                return jsonResp;
            }
            getNews();

            // var templateResponse = Handlebars.compile($("#message-response-template").html());
            // console.log(templateResponse);
            jresp = await getNews();
            let q = Math.random() * 100000;
            let n = jresp.num_results;
            console.log(n);
            let n1 = Math.ceil(q % n)
            console.log(jresp);
            console.log(jresp.results);
            var mainContainer = document.getElementById("first");
            mainContainer.innerHTML = jresp.results[n1].title;
            var mimg = document.getElementById("firstimg");

            console.log(jresp.results[n1].multimedia[0].url);
            let abc = jresp.results[n1].multimedia[0].url;
            $('#firstimg').attr("src", abc);
            let abd = jresp.results[n1].url;
            $('#firstlink').attr("href", abd);
            let m;
            m = 3;
            


            for (let p = 0; p < m; p++) {
                //looping through each post

                let item = $(`
                    <div class="card border-success mb-3" style="max-width: 180rem ; margin : 40px;" >
                      <div class="card mb-6 card-1 " style="max-width: 1400px; padding: 20px; ">
                            <div class="card-body">
                                ${jresp.results[p].title}</h5>
                        
                          
                          
                            </div>
                      </div>
                    </div>   
                `);

                    





                $("#posts-container").append(item);
            }
            
            $('#viewm').on("click", () => {
                console.log("viewmore");
                m = m+3;
                console.log(m);
                for (let p = m; p < m+3; p++) {
                //looping through each post

                let item = $(`
                    <div class="card border-success mb-3" style="max-width: 180rem ; margin : 40px;" >
                      <div class="card mb-6 card-1 " style="max-width: 1400px; padding: 20px; ">
                            <div class="card-body">
                                ${jresp.results[p].title}</h5>
                        
                          
                          
                            </div>
                      </div>
                    </div>   
                `);

                    





                $("#posts-container").append(item);
            }


            
            })

        }
    </script>
<center><h5 ><button id="viewm"> <a id="ab" class=" badge badge-pill badge-light">...View more</a></button></h5></center>





</body>

<link rel="stylesheet" href="style.css">

</html>